---
title: 🍃[Spring] JPA란 무엇인가요?
tags:
    - Spring
    - Framework
date: "2024-10-08"
thumbnail: "/assets/img/thumbnail/spring.jpeg"
---

# 🍃[Spring] JPA란 무엇인가요?
- **JPA(Java Persistence API)** 는 자바 애플리케이션에서 관계형 데이터베이스와 상호작용하기 위한 **ORM(Objcet-Relational Mapping) 표준** 입니다.
- JPA는 자바 객체와 데이터베이스 테이블 간의 매핑을 자동으로 처리하여, 개발자가 SQL 쿼리를 직접 작성하지 않고도 데이터베이스 작업을 수행할 수 있도록 도와줍니다.
- JPA는 **자바 EE(Enterprise Edition)** 의 공식 스팩 중 하나이며, 여러 구현체(Hibernate, EclipseLink, OpenJPA 등)들이 JPA 표준을 따릅니다.

## 1️⃣ JPA의 주요 개념.

### 1. 객체-관계 매핑(ORM, Object-Relational Mapping).
- JPA는 **ORM(Object-Relational Mapping)** 을 통해 **자바 객체를 데이터베이스 테이블에 자동으로 매핑합니다.**
- 이를 통해 자바 객체와 데이터베이스 간의 변환을 수동으로 처리할 필요 없이, 객체 지향적으로 데이터베이스 작업을 수행할 수 있습니다.
- ORM은 개발자가 직접 SQL을 작성하지 않고도 자바 객체를 조작함으로써 데이터를 처리할 수 있도록 도와줍니다.

### 2. 영속성(Persistence).
- JPA에서 영속성은 자바 객체를 **데이터베이스에 저장**하고 관리하는 과정을 의미합니다.
- JPA는 엔티티(Entity)라는 객체를 사용하여 데이터를 관리하며, 엔티티 객체는 특정 데이터베이스 테이블의 행(row)에 매핑됩니다.
- **영속성 컨텍스트(Persistence Context)** 는 엔티티 객체를 관리하는 공간으로, 객체의 상태를 관리하고 변경 사항을 데이터베이스에 반영합니다.

### 3. 엔티티(Entity).
- JPA에서 **엔티티는 데이터베이스의 테이블에 대응하는 자바 클래스입니다.**
- 엔티티 클래스는 데이터베이스의 테이블을 모델링하며, 각 인스턴스는 데이터베이스 테이블의 한 행(row)에 대응됩니다.
- 엔티티 클래스는 `@Entity` 어노테이션으로 선언되며, 테이블의 열(column)은 클래스의 필드로 매핑됩니다.

### 예시
```java
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    private String email;
    
    // Getters, Setters, Constructors
}
```

### 4. JPQL(Java Persistence Query Language).
- JPA는 **JPQL**이라는 쿼리 언어를 제공하며, 이를 통해 데이터베이스에 질의를 수행할 수 있습니다.
- JPQL은 SQL과 유사하지만, SQL이 데이터베이스 테이블을 대상으로 하는 반면, JPQL은 **객체를 대상으로 궈리를 수행합니다.**
- **이를 통해 데이터베이스에 종속되지 않고 객체 중심으로 데이터 조작이 가능합니다.**

### 예시
```java
SELECT u FROM User u WHERE u.name = 'Kobe'
```

- 위 JPQL 쿼리는 `User` 엔티티 객체를 대상으로 데이터를 조회하는 쿼리입니다.

### 5. 트랜잭션 관리.
- **JPA는 트랜잭션을 관리하여 데이터베이스 작업의 일관성과 안전성을 보장합니다.**
- 트랜잭션은 데이터베이스에서 일련의 작업이 모두 성공하거나 모두 실해하는 것을 보장하는 메커니즘으로, JPA는 이를 자동으로 관리해줍니다.
- 트랜잭션이 완료되면 JPA는 데이터베이스에 모든 변경 사항을 반영하며, 문제가 발생하면 롤백합니다.

> 🙋‍♂️ [트랜잭션의 의미와 역할](https://www.devkobe24.com/DB/2024-08-01-Transaction.html)

### 6. 영속성 유닛(Persistence Unit).
- **영속성 유닛**은 JPA가 데이터베이스와 상호작용하기 위해 필요한 설정 정보(데이터베이스 URL, 사용자 정보, 드라이버 등)를 담고 있는 논리적 단위입니다.
- JPA는 이 영속성 유닛을 통해 데이터베이스와 연결을 맺고, 필요한 작업을 수행합니다.
- 영속성 유닛은 `persistence.xml` 파일을 통해 설정되며, 데이터베이스와의 연결 정보가 포함됩니다.

### 7. 캐싱.
- JPA는 성능 최적화를 위해 1차 캐싱(영속성 컨텍스트에서 관리)와 2차 캐시를 제공합니다.
- 1차 캐시는 트랜잭션 범위 내에서 동일한 엔티티를 조회할 때 다시 데이터베이스에 접근하지 않고 캐시된 값을 사용합니다.

## 2️⃣ JPA의 장점.

### 1. 데이터베이스 독립성.
- JPA는 데이터베이스에 종속되지 않는 추상화 계층을 제공하여, 특정 데이터베이스 벤더에 의존하지 않고 코드를 작성할 수 있습니다.
    - 이를 통해 애플리케이션 코드의 이식성과 유지보수성이 높아집니다.

### 2. SQL 작성의 부담 감소.
- JPA는 데이터를 조작하는 데 필요한 SQL 쿼리를 자동으로 생성합니다.
- 개발자는 객체 지향적인 방식으로 데이터를 처리하며, 직접 SQL을 작성하는 부담이 줄어듭니다.

### 3. 객체 지향 프로그래밍과 데이터베이스의 간극 해소.
- JPA는 자바의 객체 지향 모델과 관계형 데이터베이스 간의 불일치를 해결합니다.
- 자바 객체의 필드를 데이터베이스의 열(Column)과 매핑하고, 자바 객체의 상태 변화를 데이터베이스에 자동으로 반영합니다.

### 4. 트랜잭션 관리 자동화.
- JPA는 트랜잭션 관리를 자동화하여 개발자가 트랜잭션 범위를 명시하지 않아도, 데이터베이스 작업의 일관성을 유지할 수 있도록 도와줍니다.

### 5. JPQL을 통한 객체 중심의 쿼리.
- JPQL은 SQL 대신 객체 모델을 기반으로 하는 쿼리 언어로, SQL에 종속되지 않고 객체 지향적으로 데이터를 조회할 수 있게 해줍니다.

### 6. 캐싱을 통한 성능 향상.
- JPA는 1차 캐시와 2차 캐시를 통해 데이터베이스 접근 횟수를 줄이고, 성능을 향상시킬 수 있습니다.

## 3️⃣ JPA 구현체.
- JPA는 인터페이스와 규약만을 정의하는 **표준**이기 때문에, 실제로 동작하기 위해서는 **구현체**가 필요합니다.
- 대표적인 JPA 구현체로는 다음과 같은 ORM(Object-Relational Mapping) 프레임워크들이 있습니다.
    - **Hibernate :** 가장 널리 사용되는 JPA 구현체로, JPA의 기능을 포함하면서도 JPA 이상의 기능들을 제공합니다.
    - **EclipseLink :** JPA의 레퍼런스 구현체로, 자바 EE 환경에서 많이 사용됩니다.
    - **OpenJPA :** Apache에서 제공하는 JPA 구현체입니다.

## 4️⃣ 결론.
- JPA는 자바 애플리케이션에서 데이터베이스와의 상호작용을 더 쉽게 만들기 위한 ORM(Object-Relational Mapping) 표준입니다.
- JPA를 사용하면 객체 지향적인 방식으로 데이터베이스 작업을 수행할 수 있으며, 데이터베이스 독립적인 코드를 작성할 수 있습니다.
- 또한, JPA는 트랜잭션 관리, 캐싱, 데이터베이스 스키마 자동 생성 등의 기능을 통해 개발자에게 많은 편의성을 제공합니다.
- JPA는 개발자가 객체 모델에 집중할 수 있게 하면서도 데이터베이스와의 상호작용을 효율적으로 처리할 수 있도록 도와줍니다.
