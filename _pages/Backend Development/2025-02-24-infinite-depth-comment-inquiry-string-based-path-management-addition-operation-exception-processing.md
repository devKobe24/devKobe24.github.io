---
title: "📚[Backend Development] 무한 Depth 댓글 조회 - 문자열 기반 경로 관리, 덧셈 연산, 예외 처리"
tags:
    - Backend Ddevelopment
date: "2025-02-24"
thumbnail: "/assets/img/thumbnail/BackendDevelopment.jpg"
---

# "📚[Backend Development] 무한 Depth 댓글 조회 - 문자열 기반 경로 관리, 덧셈 연산, 예외 처리"
## ✅1️⃣ 문자열 기반 댓글 경로(Path) 관리
- Path Enumeration 방식에서 **숫자가 아닌 문자열을 기반으로 댓글의 경로를 관리**해야 합니다.

### 📌 Path 문자열 연산의 핵심.
- 댓글 경로를 문자열로 관리하기 때문에, **덧셈 연산**을 수행할 때 숫자가 아닌 **문자열 기반 연산**이 필요합니다.
- **대소문자 및 숫자 간의 관계(0~9 < A~Z < a~z)를** 이해하고, 문자열을 증가시키는 로직이 필요합니다.

```
0~9 < A~Z < a~z
````

- 이러한 정렬 규칙을 이해하면, **댓글의 경로(Path)를 증가시키는 연산을 코드로 구현할 수 있습니다.**

## ✅2️⃣ "00000"부터 "zzzzz"까지 증가하는 문자열 연산
- Path 값은 "00000"부터 시작하여 증가하는 방식으로 관리됩니다.

### 📌 문자열 기반 정렬 방식.
- 1. **"00000" → "00001" → ... → "AAAA9" → "AAAAA" → ... → "zzzzz"로 증가**
- 2. 문자열의 대소문자 순서를 활용하여 정렬 (0-9, A-Z, a-z)
- 3. 댓글이 추가될 때마다 **이전 댓글의 경로에 1을 더하여 새로운 경로 생성**

## ✅3️⃣ 문자열 기반 덧셈(증가) 연산.
- Path 값이 문자열로 관리되므로, 숫자가 아니라 **문자열 덧셈을 수행하는 알고리즘이 필요합니다.**

### 📌 문자열 덧셈 방식
- 1. **오른쪽 문자부터 1씩 증가**
- 2. carry(올림수)가 있으면 다음 문자도 증가
- 3. "zzzzz"에 도달하면 Overflow 발생

#### 📝 예제:
```
a39zz
+    1
------
a3A00
```

- z를 넘어가면 0으로 초기화되고, 앞자리 숫자가 증가함.
- carry를 반영하여 재귀적으로 처리.

## ✅4️⃣ 숫자 기반 덧셈 방식
- 문자열 연산이 복잡할 수 있으므로, **62진수 변환 후 숫자로 연산하는 방법도 고려**할 수 있습니다.

### 📌 숫자로 변환 후 연산하는 방법.
- 1. **62진수 문자열을 10진수 숫자로 변환**
- 2. **숫자로 덧셈 수행**
- 3. **다시 62진수 문자열로 변환**

```
62진수 ("00000" ~ "zzzzz") → 10진수 변환 → +1 연산 → 다시 62진수 변환
```

- 이 방법을 사용하면 **문자열 연산보다 효율적인 방식으로 Path를 증가시킬 수 있습니다.**

## ✅5️⃣ 예외 케이스 처리 - 최초 댓글 생성
- Path를 관리할 때, **최조 댓글이 생성되는 경우**를 처리해야 합니다.

### 📌 처리 방법.
- 1. **부모 댓글(00a0z)의 하위 댓글이 없는 경우**
- 2. **첫 번째 하위 댓글을 생성해야 함**
- 3. **Path 값은 부모 Path + "00000"로 설정**

#### 📝 예제:
```
부모 Path: 00a0z
첫 번째 하위 댓글 Path: 00a0z 0000
```

## ✅6️⃣ 댓글 경로가 zzzzz까지 도달한 경우.
- Path 값이 zzzzz까지 증가하면, **더 이상 새로운 Path를 생성할 수 없는 문제가 발생**합니다.

### 📌 해결 방법.
- 1. **Path를 구성하는 문자 개수를 증가(5 → 6, 7 ...)**
- 2. **더 넓은 범위의 Path 값을 허용하도록 개선**

```
62^5 = 16,132,832 (기존)
62^6 = 998,001,488 (확장 가능)
```

- Path의 자리 수를 늘리면 **더 많은 댓글을 저장하고 정렬 가능합니다.**

## ✅7️⃣ 최종 정리
### 📌 무한 Depth 댓글 정렬을 위해 고려해야 할 사항
- 1. **Path 값을 문자열로 관리해야 하므로, 문자열 기반 덧셈 연산이 필요**
- 2. **숫자로 변환하여 62진수 연산을 수행하는 방식도 가능**
- 3. **최초 댓글 생성 시 기본 Path("00000")을 추가**
- 4. **Path가 가득 찬 경우, 자리 수를 늘려 더 많은 경로를 저장 가능**
