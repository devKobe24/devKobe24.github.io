---
title: 🍃[Spring] 빈(Bean)을 등록하는 방법.
tags:
    - Spring
    - Framework
date: "2024-10-06"
thumbnail: "/assets/img/thumbnail/spring.jpeg"
---

# 🍃[Spring] 빈(Bean)을 등록하는 방법.

## 1️⃣ `@Configuration` 어노테이션.

`@Configuration` 어노테이션은 Spring Framework에서 **자바 기반의 설정 클래스를 정의할 때 사용하는 어노테이션**입니다.

이 어노테이션이 붙은 클래스는 **스프링 컨테이너에 의해 빈 정의를 제공하는 클래스로 인식되며, 일반적으로 메서드를 통해 빈을 생성하고, 이를 스프링 컨테이너에 등록하는 역할을 합니다.**

### 1. `@Configuration`의 주요 기능.

#### 1. 자바 기반 설정 클래스.
- `@Configuration` 어노테이션은 자바 코드로 스프링 설정을 관리할 수 있도록 해줍니다.
- 전통적인 XML 기반 설정 대신, 자바 클래스를 사용해 애플리케이션의 설정을 관리하고, 빈을 정의할 수 있습니다.

#### 2. 빈 정의.
- `@Configuration` 어노테이션이 붙은 클래스 내에서 정의된 메서드에 `@Bean` 어노테이션을 사용하면, 해당 메서드가 반환하는 객체가 스프링 컨테이너에 빈으로 등록됩니다.
- 이 방식으로 객체의 생성과 초기화 과정을 설정하고 관리할 수 있습니다.

#### 3. 싱글톤 보장.
- `@Configuration`이 붙은 클래스는 기본적으로 **싱글톤 빈**을 보장합니다.
- 즉, 이 클래스 내에서 정의된 빈은 스프링 컨테이너 내에서 한 번만 생성되고, 다른 곳에서 해당 빈을 요청할 때 동일한 인스턴스가 반환됩니다.
- 이는 클래스가 `@Configuration`이 아닌 일반 클래스일 경우와 차별화되는 중요한 특성입니다.

### 2. 예시.

다음은 `@Configuration` 어노테이션을 사용하여 자바 기반으로 빈을 등록하는 예시입니다.
```java
@Configuration
public class AppConfig {
    
    @Bean
    public UserService userService() {
        return new UserService(userRepository());
    }
    
    @Bean
    public UserRepository userRepository() {
        return new UserRepository();
    }
}
```

### 3. 설명.
- `@Confifuration`
    - `AppConfig` 클래스가 스프링 컨테이너에서 설정 클래스임을 나타냅니다.
    - 이 클래스는 스프링 애플리케이션의 빈을 정의하는 역할을 합니다.
- `@Bean`
    - 이 어노테이션이 붙은 메서드는 스프링 컨테이너에 빈을 등록합니다.
    - `userService`와 `userRepository` 메서드는 각각 `UserService`와 `UserRepository` 객체를 반환하며, 이 객체들은 스프링 컨테이너에 의해 빈으로 관리됩니다.

### 4. `@Configuration`의 특징.

#### 1. 싱글톤 관리.
- `@Configuration` 어노테이션이 붙은 클래스 내에서 정의된 빈들은 기본적으로 싱글톤으로 관리됩니다.
- 즉, 여러 번 요청하더라도 동일한 인스턴스가 반환됩니다.
- 스프링이 내부적으로 프록시 클래스를 사용하여 빈의 싱글톤 속성을 보장합니다.

#### 2. 모듈화된 설정.
- `@Configuration`을 사용하면 애플리케이션의 설정을 여러 자바 클래스로 나누어 모듈화할 수 있습니다.
- 이를 통해 설정 파일이 커지더라도 관리하기 쉽고, 유지보수성이 향상됩니다.

#### 3. 다른 설정 파일과 통합.
- `@Configuration` 클래스는 다른 설정 파일이나 XML 파일과 함꼐 사용될 수 있습니다.
- 이로 인해 기본 XML 기반 설정을 점진적으로 자바 기반 설정으로 변환하는 것이 가능합니다.

### 5. `@Configuration`과 `@Component`의 차이.

`@Configuration`과 `@Component`는 모두 스프링 컨테이너에 빈을 등록할 수 있는 어노테이션이지만, 그 목적과 기능에는 차이가 있습니다.

- `@Configuration`
    - 주로 **설정 클래스에 사용됩니다.**
    - 이 클래스는 `@Bean` 어노테이션을 사용해 빈을 정의하고, 컨테이너에 등록할 여러 빈을 한곳에서 관리합니다.
    - 이 빈들은 주로 싱글톤으로 관리되며, 구성 요소들의 관계를 설정하는 데 사용됩니다.
- `@Component`
    - 일반적으로 **단일 빈**을 자동으로 등록할 때 사용됩니다.
    - 클래스에 `@Component`를 붙이면 스프링이 자동으로 해당 클래스를 스캔하여 빈으로 등록합니다.
    - 보통 특정 역할을 하는 개별 클래스를 빈으로 등록할 때 사용됩니다.

### 6. 결론.
- `@Configuration` 어노테이션은 자바 기반의 설정 클래스를 정의하는 데 사용되며, 스프링 컨테이너에서 관리될 빈을 등록하는 중요한 역할을 합니다.
- 이를 통해 애플리케이션의 설정을 더욱 명확하고 모듈화된 방식으로 관리할 수 있으며, XML 기반 설정을 대체하거나 보완하는 용도로 사용됩니다.
- `Configuration` 클래스 내의 메서드는 빈을 정의하고 이를 컨테이너에 등록하여, 스프링 애플리케이션의 동작을 제어하는 중요한 기능을 수행합니다.

## 2️⃣ `@Bean` 어노테이션
`@Bean` 어노테이션은 Spring Framework에서 **메서드 수준**에서 사용되며, 해당 메서드가 반환하는 객체를 **스프링 컨테이너에 빈(Bean)으로 등록하기 위해 사용됩니다.**

이 어노테이션은 주로 자바 기반의 설정 클래스(`@Configuration`)에서 사용되며, 빈의 생성 및 초기화를 담당하는 역할을 합니다.

### 1. `@Bean` 어노테이션의 주요 기능.

#### 1. 스프링 컨테이너에 빈 등록.
- `@Bean` 어노테이션이 붙은 메서드가 반환하는 객체는 스프링 컨테이너에 의해 관리되는 빈으로 등록됩니다.
- 이 빈은 스프링 애플리케이션에서 의존성 주입(Depency Injection, DI)을 통해 다른 클래스에서 사용할 수 있습니다.

#### 2. 메서드 호출 시 빈 반환.
- `@Bean` 메서드는 스프링 컨테이너에서 호출되어 해당 메서드가 반환하는 객체를 관리합니다.
- 이 빈은 컨테이너에서 여러 번 요청되더라도 기본적으로 **싱글톤**으로 관리됩니다.(즉, 동일한 인스턴스가 반환됨).

#### 3. 자바 기반 설정 지원.
- `@Bean` 어노테이션은 자바 기반의 설정 클래스(`@Configuration`)에서 사용되어, XML 설정을 대체 할 수 있습니다.
- 이를 통해 객체 간의 관계나 초기화 과정을 프로그래밍 방식으로 정의할 수 있습니다.

### 2. 예시 코드
- 다음은 `@Bean` 어노테이션을 사용하는 간단한 예입니다.

```java
@Configuration
public class AppConfig {
    
    @Bean
    public UserService userService() {
        return new UserService(userRepository());
    }
    
    @Bean
    public UserRepository userRepository() {
        return new UserRepository();
    }
}
```

### 3. 설명.
- `@Configuration`
    - 이 클래스가 스프링 설정 클래스로 사용됨을 나타냅니다.
    - 이 클래스 안에 빈을 정의하는 메서드가 포함됩니다.
- `@Bean`
    - 각 메서드가 반환하는 객체를 스프링 컨테이너에 빈으로 등록합니다.
    - 예를 들어, `userService()` 메서드는 `userService` 객체를 반환하며, 이 객체는 스프링 컨테이너에 의해 빈으로 관리됩니다.

### 4. 빈의 생명주기와 관리.
- 싱글톤 관리
    - 기본적으로 스프링 컨테이너는 `@Bean`으로 등록된 빈을 **싱글톤**으로 관리합니다.
    - 즉, 여러 곳에서 같은 빈을 요청하더라도 동일한 인스턴스가 반환됩니다.
- 스코프 변경 가능
    - `@Bean` 어노테이션을 사용할 때 스코프를 지정할 수 있습니다.
    - 예를 들어, 빈이 요청될 때마다 새로운 객체를 반환하는 프로토타입 스코프로 변경할 수 있습니다.
    - 이는 `@Scope` 어노테이션을 함께 사용하여 설정합니다.

### 5. `@Bean` 과 `@Component`의 차이
- `@Bean`
    - `@Bean`은 **메서드 수준**에서 사용되며, 해당 메서드가 반환하는 객체를 빈으로 등록합니다.
    - 주로 사바 설정 클래스에서 사용되어 **수동으로 빈을 정의하는 방식입니다.**
    - 이를 통해 개발자가 객체 생성 로직을 명시적으로 작성할 수 있습니다.
- `@Component`
    - `@Component`는 **클래스 수준**에서 사용되며, 스프링이 해당 클래스를 스캔하여 자동으로 빈으로 등록하게 합니다.
    - 개발자가 별도의 메서드 없이 클래스 자체를 빈으로 등록하는 **자동 빈 등록 방식**입니다.
    - `@Service`, `@Repository`, `@Controller`도 `@Component`의 특수화된 형태입니다.

### 6. 추가 기능

#### `@Bean` 파라미터
- **이름 지정**
    - `@Bean` 어노테이션은 이름을 명시적으로 지정할 수 있습니다. 기본적으로 메서드 이름이 빈 이름이 되지만, `@Bean(name = "customName")`과 같이 빈 이름을 명시할 수 있습니다.

```java
@Bean(name = "custromUserService")
public UserService userService() {
    return new UserService(userRepository());
}
```

#### 의존성 관리
- `@Bean` 메서드는 다른 빈을 의존성으로 사용할 수 있습니다.
- 위의 예시에서 `userService()` 메서드는 `userRepository()` 메서드에서 반환된 `UserRepository` 빈을 사용합니다.
- 이런한 방식으로 빈 간의 의존성을 설정할 수 있습니다.

### 7. 결론
- `@Bean` 어노테이션은 스프링에서 자바 기반으로 빈을 정의하고, 스프링 컨테이너에 등록할 때 사용됩니다.
- 주로 설정 클래스(`@Configuration`) 내에서 사용되며, 프로그래밍 방식으로 객체의 생성과 설정을 관리하는 역할을 합니다.
- 이 어노테이션은 수동으로 빈을 정의할 때 사용되며, XML 설정을 대체하거나 보완하는 방식으로 사용됩니다.
- `@Component`와는 달리 빈 생성 로직을 더 명확하게 제어할 수 있는 점이 특징입니다.
