---
title: "💾 [CS] Swap 설정이란 무엇일까요?"
tags:
    - CS
date: "2024-11-22"
thumbnail: "/assets/img/thumbnail/cs.jpeg"
---

# 💾 [CS] Swap 설정이란 무엇일까요?
- **Swap 설정은** 컴퓨터에서 **RAM(주 메모리)이 부족할 경우** 데이터를 일시적으로 저장할 수 있는 **디스크 공간을 설정하는 작업을 의미합니다.**
    - 이를 통해 시스템이 더 많은 프로그램을 실행하거나 메모리 요구량이 큰 작업을 처리할 수 있습니다.
    - Swap은 주로 리눅스 시스템에서 사용되며, 시스템 메모리를 효율적으로 관리하는 데 중요한 역할을 합니다.

## 1️⃣ Swap의 주요 개념.
### 1️⃣ Swap 영역.
- 디스크의 일부를 **가상 메모리**로 사용하는 공간.
- RAM이 부족하면 Swap에 데이터를 저장해 시스템이 계속 동작하도록 지원.

### 2️⃣ Swap 파일 또는 Swap 파티션.
- **Swap 파일 :** 파일 시스템 내에서 Swap 용도로 사용되는 파일.
- **Swap 파티션 :** 디스크의 별도 파티션으로 할당된 Swap 공간.

## 2️⃣ Swap의 동작 원리.
- 1. RAM이 부족해지면, 운영체제는 사용하지 않는 데이터(예: 오래 사용하지 않은 프로그램의 데이터)를 Swap 영역으로 이동시킵니다.
- 2. 이를 통해 RAM은 새로운 데이터 처리에 사용할 수 있는 여유 공간을 확보합니다.
- 3. 필요 시, Swap에 저장된 데이터를 다시 RAM으로 불러옵니다.

## 3️⃣ Swap의 장점.
- **1. 메모리 부족 문제 완화.**
    - RAM이 부족해도 시스템이 계속 작동하도록 지원.
    - 과도한 RAM 사용으로 인한 프로그램 강제 종료 방지.
- **2. 시스템 안정성 증가.**
    - Swap은 RAM 과부하를 줄이고 시스템의 안정성을 유지.
- **3. 멀티태스킹 지원.**
    - 여러 프로그램을 동시에 실행할 때 유용.

## 4️⃣ Swap의 단점.
- **1. 속도 저하.**
    - 디스크는 RAM보다 속도가 느리므로 Swap에 데이터를 이동하면 성능이 저하될 수 있음.
- **2. 디스크 수명 단축.**
    - SSD를 사용할 경우 Swap으로 인해 디스크의 쓰기 작업이 증가해 수명이 단축될 가능성이 있음.
- **3. Swap 과도 사용 시 시스템 응답성 저하.**
    - Swap이 지나치게 사용되면 프로그램 실행 속도가 느려지고, 시스템 전체가 느려질 수 있음.

## 5️⃣ Swap 설정 확인.
- 리눅스에서 Swap 설정 여부와 상태를 확인하려면 다음 명령어를 사용해야합니다.
    - 1. **현재 Swap 상태 확인.**
    ```bash
    swapon --show
    ```
    - 결과: 현재 활성화된 Swap 파티션이나 파일이 표시됨.
    - 2. **시스템 전체 메모리 정보 확인.**
    ```bash
    free -h
    ```

## 6️⃣ Swap 생성 및 설정 방법.
- **1. Swap 파일 생성.**
    - 기존 파티션을 변경하지 않고 Swap 파일을 사용하려면 다음 단계를 따릅니다.
    ```bash
    sudo fallocate -l 1G /swapfile #1GB 크기의 Swap 파일 생성
    sudo chmod 600 /swapfile # 파일 권한 설정
    sudo mkswap /swapfile # Swap 파일로 포맷
    sudo swapon /swapfile # Swap 활성화
    ```

- **2. Swap 파일을 시스템에 영구 추가.**
    - 시스템 재부팅 후에도 Swap이 유지되도록 설정하려면 /etc/fstab 파일에 추가.
    ```bash
    echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
    ````

- **3. Swap 파티션 생성.**
    - 디스크의 일부를 Swap 파티션으로 사용하려면.
    ```bash
    sudo fdisk /dev/sdX # 파티션 생성
    sudo mkswap /dev/sdX1 # Swap 파티션으로 포맷
    sudo swapon /dev/sdX1 # Swap 활성화
    ```

## 7️⃣ Swap 비활성화
- **1. 일시적으로 Swap 비활성화**
```bash
sudo swapoff /swapfile
```

- **2. 영구 비활성화**
    - /etc/fstab 파일에서 Swap 항목을 제거하고 다시 부팅.

## 8️⃣ Swap 크기 결정.
- 일반적으로 시스템의 RAM 크기에 따라 적절한 Swap 크기를 설정합니다.
    - **1GB RAM 이하 :** RAM 크기의 2배.
    - **2 ~ 4GB RAM :** RAM 크기와 동일.
    - **8GB RAM 이상 :** 시스템 용도에 따라 다름(보통 4GB ~ 8GB).

## 9️⃣ Swap 사용 사례.
- **1. 리소스 제한된 환경.**
    - RAM이 적은 시스템에서 Swap을 통해 더 많은 프로그램 실행 가능.
- **2. 데이터 과학 및 대규모 연산.**
    - 메모리를 많이 사용하는 작업(예: 머신러닝, 대규모 데이터 처리)에서 유용.
- **3. 서버 환경.**
    - RAM이 부족한 경우를 대비해 Swap 설정을 통해 서버의 다운타임을 방지.

## 1️⃣0️⃣ Swap이 필요 없는 경우.
- 충분한 RAM이 있는 경우.
- Swap 사용이 디스크 성능에 부정적 영향을 미칠 수 있는 경우(예: SSD 수명 우려).

## 1️⃣1️⃣ 요약.
- Swap은 RAM 부족 시 디스크를 보조 메모리로 사용하는 기술로, 시스템 안정성과 메모리 관리를 돕습니다.
    - 하지만 성능 저하와 디스크 수명 단축의 단점이 있을 수 있으므로, 시스템 요구 사항에 맞춰 적절히 설정해야 합니다.
