---
title: "🍃[Spring Boot] 스프링?"
tags:
    - Spring Boot
    - Framework
    - Spring
date: "2024-02-12"
thumbnail: "/assets/img/thumbnail/spring.jpeg"
---

# Intro.

* **스프링 프레임워크(Spring Framework)** 는 자바(Java) 가반의 애플리케이션 프레임워크로 엔터프라이즈급 애플리케이션을 개발하기 위한 다양한 기능을 제공합니다.
* 스프링은 목적에 따라 다양한 프로젝트를 제공하는데, 그중 하나가 **스프링 부트(Spring Boot)** 입니다.

이번 포스팅에서는 먼저 스프링 부트의 **기반**인 **스프링 프레임워크**를 알아보고, 스프링이 제공하는 다양한 프로젝트 중 하나인 **스프링 부트**의 특징을 설명하겠습니다.

# 스프링 프레임워크.

**스프링 프레임워크(이후 스프링)** 는 자바에서 가장 많이 사용하는 프레임워크입니다.
**스프링**은 자바 언어를 이용해 엔터프라이즈급 개발을 편리하게 만들어주는 '오픈소스 경량급 애플리케이션 프레임워크'로 불리고 있습니다.
쉽게 말해서 자바로 애플리케이션을 개발하는 데 필요한 기능을 제공하고 쉽게 사용하도록 돕는 도구입니다.

> TIP: '엔터프라이즈급 개발?'
> 
> '엔터프라이즈급 개발'은 기업 환경을 대상으로 하는 개발을 뜻합니다.
> 네이버나 카카오톡 같은 대규모 데이터를 처리하는 환경을 엔터프라이즈 환경이라고 부릅니다.
> 스프링은 이 환경에 알맞게 설계되어 있어 개발자는 애플리케이션을 개발할 때 많은 요소를 프레임워크에 위임하고 비즈니스 로직을 구현하는 데 집중할 수 있습니다.

스프링의 핵심 가치는 **"애플리케이션 개발에 필요한 기반을 제공해서 개발자가 비즈니스 로직 구현에만 집중할 수 있게끔 하는 것"** 입니다.

# 제어 역적(IoC)

일반적인 자바 개발의 경우 객체를 사용하기 위해 아래의 예제 코드와 같은 코드를 사용합니다.

```java
@RestController
public class NoDIController {
    
    private MyService service = new MyServiceImpl();
    
    @GetMapping("/no-di/hello")
    public String getHello() {
        return service.getHello();
    }
}
```

**즉, 사용하려는 객체를 선언하고 해당 객체의 의존성을 생성한 후 객체에서 제공하는 기능을 사용합니다.**
객체를 생성하고 사용하는 일련의 작업을 개발자가 직접 제어하는 구조입니다.

하지만 **제어 역전(IoC: Inversion of Controller)** 을 특징으로 하는 **스프링**은 기존 자바 개발 방식과 다르게 동작합니다.
**IoC를 적용한 환경**에서는 사용할 객체를 직접 생성하지 않고 **객체의 생명주기 관리를 외부에 위임합니다.**
여기서 **'외부'** 는 **스프링 컨테이너(Spring Container)** 또는 **IoC 컨테이너(IoC Container)** 를 의미합니다.

"객체의 관리를 컨테이너에 맡겨 제어권이 넘어간 것"을 **제어 역전**이라고 부르며, **제어 역전**을 통해 **의존성 주입(DI: Dependency Injection), 관점 지향 프로그래밍(AOP: Aspect-Oriented Programming)** 등이 가능해집니다.

**스프링** 을 사용하면 **객체의 제어권을 컨테이너로 넘기기 때문에** **"개발자는 비즈니스 로직을 작성하는 데 더 집중"** 할 수 있습니다.

# 의존성 주입(DI)

**의존성 주입(DI: Dependency Injection)이란** "제어 역전의 방법 중 하나"로, 사용할 객체를 직접 생성하지 않고 외부 컨테이너가 생성한 객체를 주입받아 사용하는 방식을 의미합니다.

스프링에서 의존성을 주입받는 방법은 3가지가 있습니다.

1. **생성자**를 통한 의존성 주입
2. **필드 객체 선언**을 통한 의존성 주입
3. **setter 메서드**를 통한 의존성 주입

스프링에서는 `@Autowired`라는 어노테이션(annotation)을 통해 의존성을 주입할 수 있습니다.
스프링 4.3 이후 버전은 생성자를 통해 의존성을 주입할 때 `@Autowired` 어노테이션을 생략할 수도 있습니다.
하지만 스프링을 처음 다룰 때는 **가독성**을 위해 어노테이션을 명시하기를 권장합니다.

스프링에서 의존성을 주입받는 각 방법에 대한 예시 코드는 아래와 같습니다.

```java
// 생성자를 통한 의존성 주입
@RestController
public class DIController {
    
    // <-- 의존성을 주입 받는 주요부분 
    MyService myService;
    @Autowired
    public DIController(MyService myService) {
        this.myService = myServicel
    }
    // -->
    
    @GetMapping("di/hello")
    public String getHello() {
        return myService.getHello();
    }
}
```

```java
// 필드 객체 선언을 통한 의존성 주입
@RestController
public class FieldInjectionController {
    // <-- 의존성을 주입 받는 주요부분
    @Autowired
    private MyService myService;
    // -->
}
```

```java
// setter 메서드를 통한 의존성 주입
@RestController
public class SetterInjectionController {
    // <-- 의존성을 주입 받는 주요부분
    MyService myService;
    
    @Autowired
    public void setMyService(MyService myService) {
        this.myService = myService;
    }
    // -->
}
```

스프링 공식 문서에서 권장하는 의존성 주입 방법은 **"생성자를 통해 의존성을 주입받는 방식"** 입니다.
다른 **방식과는 다르게 생성자를 통해 의존성을 주입받는 방식**은 "레퍼런스 객체 없이는 객체를 초기화할 수 없게 설계할 수 있기 때문입니다."

# 관점 지향 프로그래밍(AOP)

**관점 지향 프로그래밍(이후 AOP: Aspect-Oriented Programming)** 은 스프링의 아주 중요한 특징입니다.
AOP는 OOP를 더욱 잘 사용하도록 돕는 개념으로 보는 것이 좋습니다.

> 스터디 가이드
> 
> OOP를 요약하자면 각 기능을 재사용 가능한 개별 객체로 구성해 프로그래밍하는 것을 뜻합니다.
> 
> 다음과 같은 OOP의 핵심키워드를 이해한다면 더 나은 객체지행 프로그래밍이 가능합니다.
> 
>* 추상화(abstraction)
>* 캡슐화(encapsulation)
>* 상속(inheritance)
>* 다형성(polymorphism)

**"AOP는 관점을 기준으로 묶어 개발하는 방식을 의미합니다."**
여기서 **"관점(aspect)"** 이란 **"어떤 기능을 구현할 때 그 기능을 '핵심 기능'과 '부가 기능'으로 구분해 각각을 하나의 관점으로 보는 것을 의미"** 합니다.

* **"핵심기능"**
    * 비즈니스로직을 구현하는 과정에서 비즈니스 로직이 처리하려는 목적 기능을 말합니다.
        * 예를 들면, 클라이언트로부터 상품 정보 등록 요청을 받아 데이터베이스에 저장하고, 그 상품 정보를 조회하는 비즈니스 로직을 구현한다면
            * (1) 상품 정보를 데이터베이스에 저장하고,
            * (2) 저장된 상품 정보 데이터를 보여주는 코드가 핵심 기능입니다.

그런데 실제 애플리케이션을 개발할 때는 핵심 기능에 부가 기능을 추가할 상황이 생깁니다.
"핵심 기능인 비즈니스 로직 사이에 로깅 처리를 하거나 트랜잭션을 처리하는 코드를 예로 들 수 있습니다."

일반적인 OOP 형식으로 비즈니스 로직을 작성하면 아래 그림과 같이 비즈니스 동작 흐름이 발생합니다.

<img src="https://github.com/devKobe24/images/blob/main/OOP%E1%84%87%E1%85%A1%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8%E1%84%8B%E1%85%B4%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%E1%84%85%E1%85%A9%E1%84%8C%E1%85%B5%E1%86%A8.png?raw=true">

OOP 방식의 애플리케이션 로직에서는 위 그림과 같이 객채마다 핵심 기능을 수행하기 위한 **"로직"** 과 함께 부가 기능인 **"로깅"**, **"트랜잭션"** 등의 코드를 작성합니다.
위 그림의 상품정보 등록 기능과 상품정보 조회 기능은 엄연히 다른 기능으로, 각자 로직이 구현돼 있습니다.

하지만 유지보수 목적이나 데이터베이스 접근을 위해 작성된 **"로깅"** 과 **"트랜잭션"** 영역은 상품정보를 등록할 때나 상품정보를 조회할 때 동일한 기능을 수행할 확률이 높습니다.

즉, 핵심 기능을 구현한 두 로직에 동일한 코드가 포함된다는 것을 의미합니다.

AOP의 관점에서는 부가 기능은 핵심 기능이 어떤 기능인지에 구관하게 로직이 수행되기 전 또는 후에 수행되기만 하면 됩니다.
그래서 아래 그림과 같은 구성으로 만들 수 있습니다.

<img src="https://github.com/devKobe24/images/blob/main/AOP%E1%84%87%E1%85%A1%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8%E1%84%8B%E1%85%B4%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%E1%84%85%E1%85%A9%E1%84%8C%E1%85%B5%E1%86%A8.png?raw=true">

이처럼 여러 비즈니스 로직에서 반복되는 부가 기능을 하나의 **"공통 로직으로 처리하도록 모듈화해 삽입하는 방식"** 을 **"AOP"** 라고 합니다.

이러한 AOP를 구현하는 방법은 크게 세 가지가 있습니다.

* 컴파일 과정에 삽입하는 방식
* 바이트코드를 메모리에 로드하는 과정에 삽입하는 방식
* 프락시 패턴을 이용한 방식

이 가운데 스프링은 디자인 패턴 중 하나인 **"프락시 패턴"** 을 통해 **"AOP"** 기능을 제공하고 있습니다.

스프링 AOP의 목적은 OOP와 마찬가지로 모듈화해서 재사용 가능한 구성을 만드는 것이고, 모듈화된 객체를 편하게 적용할 수 있게 함으로써 개발자가 비즈니스 로직을 구현하는 데만 집중할 수 있게 도와주는 것입니다.

# 스프링 프레임워크의 다양한 모듈

스프링 프레임워크는 기능별로 구분된 약 20여 개의 모듈로 구성돼 있습니다.

아래 그림은 스프링 공식 문서에서 제공하는 다이어그램입니다.

<img src="https://github.com/devKobe24/images/blob/main/%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%E1%84%8B%E1%85%B4%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF.png?raw=true">

스프링 프레임워크 공식 문서에서는 스프링 버전별로 다른 다이어그램을 제시하고 있지만 큰 틀은 유사합니다.
그리고 스프링 프레임워크를 사용한다고 해서 모든 모듈을 사용할 필요는 없습니다.
애플리케이션 개발에 필요한 모듈만 선택해서 사용하게끔 설계돼 있으며, 이를 "경량 컨테이너 설계"라고 부릅니다.
