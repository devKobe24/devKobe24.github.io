---
title: "🌐[Network] 네트워크 개념 - 서비스 프리미티브"
tags:
    - Network
date: "2024-09-14"
thumbnail: "/assets/img/thumbnail/network.jpeg"
---

# 🌐[Network] 네트워크 개념 - 서비스 프리미티브.

## 1️⃣ 서비스 프리미티브.
- 프로토콜은 계층 구조로 이루어져 있고, 하위 계층이 상위 계층에 서비스를 제공하는 방식으로 동작합니다.
    - 이러한 서비스는 다음에 살펴볼 프리미티브(Primitive) 형태로 구현됩니다.
- 계층 구조 프로토콜에서 하위 계층이 상위 계층에 제공하는 서비스의 종류에는 연결형과 비연결형이 있습니다.

### 연결형 서비스.
- 연결형(Connection-oriented) 서비스를 이용하는 절차는 크게 3단계 입니다.
    - 먼저 데이터 전달 경로를 설정하는 연결 설정 단계가 필요합니다.
        - 이 단계가 성공적으로 수행되어 연결이 설정되어야 다음 단계인 데이터 전송이 가능합니다.
            - 모든 데이터의 전송이 완료되어 데이터 전송 단계를 끝내려면 연결을 끊는 연결 해제 단계가 필요합니다.
- 연결형 서비스의 동작 원리는 전화 시스템을 이용한 통화 절차와 매우 유사합니다.

### 비연결형 서비스.
- 비연결형(Connectionless) 서비스는 우편 시스템의 동작 원리와 비슷합니다.
    - 연결을 설정하고 해제하는 단계가 필요 없습니다.
        - 즉, 전송할 데이터가 있으면 각 데이터를 독립적으로 목적지 호스트로 전송하면 됩니다.
- 데이터는 독립적인 경로 선택 과정에 의해 전달되므로 도착하는 순서가 보낸 순서와 일치하지 않을 수 있습니다.
- 하위 계층이 상위 계층에 제공하는 서비스는 프리미티브(Primitive) 형태로 구현됩니다.
    - 따라서 프리미티브는 하위 계층을 사용하는 방법을 정형화한 것입니다.
- 연결형 서비스에서 추상화될 수 있는 기본 서비스 프리미티브의 종류에는 아래의 표처럼 CONNECT, DATA, DISCONNECT가 있습니다.

| 프리미티브 | 용도        |
| ---------- | ----------- |
| CONNECT    | 연결 설정   |
| DATA       | 데이터 전송 |
| DISCONNECT | 연결 해제   |

- 통신 프로토콜에서 프리미티브를 올바르게 수행하려면 각 프리미티브가 아래의 표의 네 가지 기능을 포함하도록 설계해야 합니다.
- 표에서는 설명의 편리함을 위하여 클라이언트와 서버라는 용어를 사용했으며, 아래 그림에서는 왼쪽 호스트를 클라이언트, 오른쪽 호스트를 서버로 가정했습니다.
- 클라이언트에서 서버로 전달되는 요청은 Request와 Indication으로 구현되고, 서버의 응답은 Response와 Confirm으로 구현됩니다.

| 기능 | 설명 |
| -------- | -------- |
|Request|클라이언트가 서버에 서비스를 요청함|
|Indication|서버에 서비스 요청이 도착했음을 통지함|
|Response|서버가 클라이언트에 서비스 응답을 회신함|
|Confirm|클라이언트에 응답이 도착했음을 통지함|

- 아래 그림은 클라이언트와 서버 사이에서 서비스 프리미티브가 처리되는 원리를 설명하고 있습니다.
    - 클라이언트의 상위 계층이 하위 계층에 Request를 요청하면 이 요청은 하위 계층 아래에 있는 차하위 계층의 도움을 받아 서버의 하위 계층에 전달됩니다.
        - 그러면 이 요청은 서버의 상위 계층에 Indication 형태로 전달되어 서버가 클라이언트 요청을 인지합니다.
            - 서버에서는 해당 프리미티브를 올바르게 수신하였음을 클라이언트에 통보하기 위하여 Response를 응답으로 보내고, 반대의 과정을 거쳐서 클라이언트에 Confirm 형태로 도착합니다.
                - 이와 같은 4단계 절차를 통해 하나의 서비스 프리미티브가 처리됩니다.

<img src = "https://github.com/devKobe24/images2/blob/main/network/network-service-primitive-workporcess.png?raw=true">

- 위의 그림의 4단계 절차를 전화 시스템의 연결 설정인 CONNECT에 적용하여 설명하면 다음과 같습니다.
    - 전화 거는 사람을 클라이언트, 전화 받는 사람을 서버로 가정하면, 통신 회사의 전화망은 클라이언트와 서버 기능을 모두 수행하는 하위 계층이 됩니다.
        - 발신자가 전화번호를 누르면(Request) 전화망은 이 전화번호에 해당하는 전화기의 위치를 찾아 수신자의 전화벨(Indication)이 울리게 합니다.
            - 수신자가 전화를 받기 위해 통화 버튼을 누르면(Request) 전화망은 이 사실을 바로 인지할 수 있습니다.
                - 수신자가 통화 버튼을 누름과 동시에 발신자 전화기의 발신음이 끊기면서(Confirm) 통화 연결 상태가 되었음을 확인할 수 있습니다.

## 2️⃣ 네 가지 서비스 프리미티비의 기능.
- 네 가지 서비스 프리미티브의 기능을 요약하여 설명하면 다음과 같습니다.
    - 여기서 상위 계층과 사위 계층을 프로토콜이라는 용어로 설명합니다.

### Request
- Request는 클라이언트가 서버에 프리미티브의 기능을 수행하도록 요청하는 것입니다.
- 클라이언트에서는 상위 프로토콜이 하위 프로토콜에 요청을 전달하고, 이 요청이 가장 아래의 물리 계층을 통하여 서버에 전달됩니다.
- 연결 설정 요청(CONNECT.Request), 데이터 전송 요청(DATA.Request), 연결 해제 요청(DISCONNECT.Request) 등이 있습니다.

### Indication
- 물리 계층을 통하여 Request 요청을 수신한 서버는 이 요청을 물리 계층 위에 있는 하위 프로토콜에 전달합니다.
    - 이후, Indication을 사용해서 상위 프로토콜에 프리미티브 요청이 발생했음을 알립니다.
- 연결 설정, 데이터 전송, 연결 해제에 대해 CONNECT.Indication, DATA.Indication, DISCONNECT.Indication 순으로 사용합니다.

### Response
- 클라이언트로부터 프리미티브를 받은 서버에서는 Response를 이용해 클라이언트에 응답합니다.
- 응답의 전달 과정은 Request, indication과 반대의 순서로 진행되며, 연결 설정 요청에 대해서는 CONNECT.Reponse를 사용해 연결 허용이나 거부로 응답하고, 데이터는 DATA.Response, 연결 해제는 DISCONNECT.Response로 전달합니다.

### Confirm
- 서버에서 보낸 응답은 Confirm 형태로 클라이언트에 회신됩니다.
- 연결 설정은 CONNECT.Confirm, 데이터는 DATA.Confirm, 연결 해제는 DISCONNECT.Confirm로 전달됩니다.
