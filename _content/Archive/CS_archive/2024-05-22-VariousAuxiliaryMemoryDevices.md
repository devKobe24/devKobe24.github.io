---
title: "💾 [CS] 다양한 보조기억장치"
tags:
    - CS
date: "2024-05-22"
thumbnail: "/assets/img/thumbnail/cs.jpeg"
---

# 다양한 보조기억장치

보조기억장치에는 다양한 종류가 있습니다.

그중 가장 태중적인 보조기억장치는 하드 디스크와 플래시 메모리입니다.

우리가 흔히 사용하는 USB 메모리, SD 카드, SSD 같은 저장 장치를 말합니다.

## 하드 디스크(HDD: Hard Disk Drive)

**하드 디스크(HDD: Hard Disk Drive)** 는 자기적인 방식으로 데이터를 저장하는 보조기억장치입니다.

이 때문에 하드 디스크를 **자기 디스크(magnetic disk)** 의 일종으로 지칭하기도 합니다.

대용향 저장 장치가 필요한 작업이나 서버실에 자주 출입하는 작업을 한다면 하드 디스크를 자주 접하게 될 겁니다.

### 하드 디스크의 생김새.

다음 그림이 바로 하드 디스크입니다.

우리가 아는 CD나 옛날 음향 장치는 LP가 떠오를 겁니다.

실제로도 하드 디스크는 CD나 LP와 비슷하게 동작합니다.

동그란 원판에 데이터를 저장하고, 그것을 회전시켜 뾰족한 리더기로 데이터를 읽는 점에서 비슷합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

하드 디스크에서 실질적으로 데이터가 저장되는 곳은 아래 그림 속 동그란 원판입니다.

이를 **플래터(platter)** 라고 합니다.

하드 디스크는 자기적인 방식으로 데이터를 저장합니다.

플래터는 자기 물질로 덮여 있어 수많은 N극과 S극을 저장합니다.

N극과 S극은 0과 1의 역할을 수행합니다.

그 플래터를 회전시키는 구성 요소를 **스핀들(spindle)** 이라고 합니다.

스핀들이 플래터를 돌리는 속도는 분당 회전수를 나타내는 **RPM(Revolution Per Minute)** 이라는 단위로 표현됩니다.

가령 RPM이 15,000인 하드 디스크는 1분에 15,000바퀴를 회전하는 하드 디스크입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B72.png?raw=true">

플래터를 대상으로 데이터를 읽고 쓰는 구성 요소는 **헤드(head)** 입니다.

헤드는 플래터 위에서 미세하게 떠 있는 채로 데이터를 읽고 쓰는, 마치 바늘같이 생긴 부품입니다.

그리고 헤드는 원하는 위치로 헤드를 이동시키는 **디스크 암(disk arm)** 에 부착되어 있습니다.

CD나 LP에 비해 하드 디스크는 훨씬 더 많은 양의 데이터를 저장해야 하므로 일반적인 여러 겹의 플래터로 이루어져 있고 플래터 양면을 모두 사용할 수 있습니다.

양면 플래터를 사용하면 위아래로 플러터당 두 개의 헤드가 사용됩니다.

이 때 일반적으로 모든 헤드는 디스크 암에 부착되어 다같이 이동합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B73.png?raw=true">

### 데이터가 저장되는 방법.

그럼 이제 플래터에 데이터가 어떻게 저장되는지 알아봅시다.

플래터는 **트랙(track)** 과 **섹터(sector)** 라는 단위로 데이터를 저장합니다.

아래 그림터럼 플래터를 여러 동심원으로 나누었을 때 그중 하나의 원을 트랙이라고 부릅니다.

그리고 트랙은 마치 피자처럼 여러 조각으로 나우어지는데, 이 한 조각을 섹터라고 부릅니다.

섹터는 하드 디스크의 가장 작은 전송 단위입니다.

하나의 섹터는 일반적으로 512바이트 정도의 크기를 가지고 있지만, 정확한 크기는 하드 디스크에 따라 차이가 있습니다.

일부 하드 디스크의 섹터 크기는 4,096바이트에 이르기도 합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B74.png?raw=true">

여러 겹의 플래터가 사용 될 수 있습니다.

이때 여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위를 **실린더(cyilnder)** 라고 부릅니다.

쉽게 말해 한 플래터를 동심원으로 나눈 공간은 트랙, 같은 트랙끼리 연결한 원통 모양의 공간은 실린더입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B75.png?raw=true">

연속된 정보는 보통 한 실린더에 기록됩니다.

예를 들어 두 개의 플래터를 사용하는 하드 디스크에서 네 개 섹터에 걸쳐 데이터를 저장할 때는 첫 번째 플래터 윗면, 뒷면과 두 번째 플래터 윗면, 뒷면에 데이터를 저장합니다.

연속된 정보를 하나의 실린더에 기록하는 이유는 디스크 암을 움직이지 않고도 바로 데이터에 접근할 수 있기 때문입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B76.png?raw=true">

### 데이터에 접근하는 과정

데이터가 하드 디스크의 섹터, 트랙, 실린더에 저장된다는 것을 알았다면 저장된 데이터에 접근하는 과정을 생각해 봅시다.

하드 디스크가 저장된 데이터에 접근하는 시간은 크게 **탐색 시간, 회전 지연, 전송 시간** 으로 나뉩니다.

- **탐색 시간(seek time) :** 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간을 의미합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B77.png?raw=true">

- **회전 지연(rotational latency) :** 헤드가 있는 곳으로 플래터를 회전시키는 시간을 의미합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B78.png?raw=true">

- **전송 시간(transfer time) :** 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간을 의미합니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%92%E1%85%A1%E1%84%83%E1%85%B3%E1%84%83%E1%85%B5%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B79.png?raw=true">

위 시간들은 별것 아닌 것 같아도 성능에 큰 영향을 끼치는 시간입니다.

일례로 구글의 AI를 주도하고 있는 제프 딘은 과거 '프로그래머가 꼭 알아야 할 컴퓨터 시간들'을 공개한 바 있는데, 일부를 발췌하면 다음과 같습니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%E1%84%85%E1%85%A2%E1%84%86%E1%85%A5%E1%84%80%E1%85%A1%E1%84%81%E1%85%A9%E1%86%A8%E1%84%8B%E1%85%A1%E1%86%AF%E1%84%8B%E1%85%A1%E1%84%8B%E1%85%A3%E1%84%92%E1%85%A1%E1%86%AF%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%AB.png?raw=true">

물론 2011년에 자료가 공개된 이후 오늘날 하드 디스크 성능은 많이 향상되었지만, 하드 디스크에서 다량의 데이터를 탐색하고 읽어 들이는 시간은 생각보다 어마어마하다는 사실을 쉽게 짐작할 수 있습니다.

탐색 시간과 회전 지연을 단축시키기 위해서는 플래터를 빨리 돌려 RPM을 높이는 것도 중요하지만, 참조 지역성, 즉 접근하려는 데이터가 플래터 혹은 헤드를 조금만 옮겨도 접근할 수 있는 곳에 위치해 있는 것도 중요합니다.

---

## 플래시 메모리

하드 디스크는 최근에 많이 사용하는 보조기억장치이지만, **플래시 메모리(flush memory)** 기반의 보조기억장치 또한 많이 사용합니다.

우리가 흔히 사용하는 USB 메모리, SD 카드, SSD가 모두 플래시 메모리 가반의 보조기억장치입니다.

### 플래시 메모리 내부.

다음 그림에서 붉은 박스로 표기한 부분이 플래시 메모리입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B51.png?raw=true">

플래시 메모리는 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치입니다.

사실 플래시 메모리는 보조기억장치 범주에만 속한다기보다는 다양한 곳에서 널리 사용하는 저장 장치로 보는 것이 옳습니다.

주기억장치 중 하나인 ROM에도 사용되고, 우리가 일상적으로 접하는 거의 모든 전자 제품안에 플래시 메모리가 내장되어 있다고 봐도 무방합니다.

> **두 종류의 플래시 메모리**
> 
> 플래시 메모리에는 크래 **NAND 플래시 메모리** 와 **NOR 플래시 메모리** 가 있습니다.
> NAND 플래시와 NOR 플래시는 각각 NAND 연산을 수행하는 회로(NAND 게이트)와 NOR 연산을 수행하는 회로(NOR 게이트)를 기반으로 만들어진 메모리를 뜻합니다. 
> 이 둘 중 대용량 저장 장치로 많이 사용되는 플래시 메모리는 NAND 플래시 메모리 입니다.

플래시 메모리에는 **셀(cell)** 이라는 단위가 있습니다.

셀이란 플래시 메모리에서 데이터를 저장하는 가장 작은 단위입니다.

이 셀이 모이고 모여 MB, GB, TB 용량을 갖는 저장 장치가 되는 것입니다.

이 때 하나의 셀에 몇 비트를 저장할 수 있느냐에 따라 플래시 메모리 종류가 나뉩니다.

한 셀에 1비트를 저장할 수 있는 플래시 메모리를 **SLC(Single Level Cell)** 타입,

한 셀에 2비트를 저장할 수 있는 플래시 메모리를 **MLC(Multiple Level Cell)** 타입,

한 셀에 4비트를 저장할 수 있는 플래시 메모리를 **TLC(Triple-Level Cell)** 타입이라고 합니다.

큰 차이가 아닌 것처럼 보여도 이는 플래시 메모리의 수명, 속도, 가격에 큰 영향을 끼칩니다.

참고로 한 셀에 4비트를 저장할 수 있는 QLC 타입도 있습니다.

> **플래시 메모리도 수명이 있나요?**
> 
> 플래시 메모리에는 수명이 있습니다.
> 플래시 메모리 뿐만 아니라 하드 디스크 또한 수명이 있습니다.
> 우리가 사용하는 USB 메모리, SSD, SD 카드는 수명이 다하면 더 이상 저장 장치로써 사용이 불가능합니다.
> 종이에 연필로 쓰고 지우개로 지우고를 반복하다 보면 결국 종이가 찢어지는 것처럼 한 셀에 일정 횟수 이상 데이터를 쓰고 지우면
> 그 셀은 더 이상 데이터를 저장할 수 없기 때문입니다.

### SLC, MLC, TCL 타입의 특징과 차이점.

사람 한 명을 비트, 셀을 집에 비유하면 SLC 타입은 한 집에 한 명, MLC 타입은 한 집에 두 명, TLC 타입은 세 명이 사는 구조로 비유할 수 있습니다.

### SLC 타입

SLC 타입은 아래 그림과 같이 한 셀로 두 개의 정보를 표현할 수 있습니다.

홀로 거주하는 집에 제약 없이 출입이 가능하듯 SLC 타입은 MLC나 TLC 타입에 비해 비트의 빠른 입출력이 가능합니다.

<img src = "https://github.com/devKobe24/images/blob/main/SLC%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

수명도 MLC나 TLC 타입보다 길어서 수만에서 수십만 번 가까이 데이터를 쓰고 지우고를 반복할 수 있습니다.

하지만 SLC 타입은 용량 대비 가격이 높습니다.

이는 마치 혼자서 살면 감당해야 할 주거 비용이 커지는 것과 같습니다.

그렇기에 보통 기업에서 데이터를 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한 경우에 SLC 타입을 사용합니다.

### MLC 타입

MLC 타입은 다음 그림과 같이 한 셀로 네 개의 정보를 표현할 수 있습니다.

SLC 타입보다 일반적으로 속도와 수명은 떨어지지만, 한 셀에 두 비트씩 저장할 수 있다는 점에서 MLC 타입은 SLC 타입도다 대용량화하기 유리합니다.

집의 개수가 같다면 한 집에 한 명씩 사는 것보다 한 집에 두 명씩 사는 것이 훨씬 더 많은 사람을 수용할 수 있는 것과 같은 이치입니다.

<img src = "https://github.com/devKobe24/images/blob/main/MLC%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

두 명이 한 집에서 주거 비용을 나눠 내면 혼자 감당해야 하는 주거 비용보다 저렴해지듯 MLC 타입은 SLC 타입보다 용량 대비 가격이 저렴합니다.

시중에서 사용되는 많은 플래시 메모리 저장 장치들이 MLC 타입(혹은 후술할 TLC 타입)으로 만들어집니다.

### TLC 타입

한 셀당 3비트씩 저장할 수 있는 TLC 타입은 한 셀로 여덟 개의 정보를 표현할 수 있습니다.

그렇기에 대용화 하기 유리합니다.

일반적으로 SLC나 MLC 타입보다 수명과 속도가 떨어지지만 용량 대비 가격도 저렴합니다.

<img src = "https://github.com/devKobe24/images/blob/main/TLC%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

### 정리.

정리하면, 같은 용량의 플래시 메모리 저장 장치라고 할지라도 셀의 타입에 따라 수명, 가격, 성능이 다릅니다.

썻다 지우기를 자주 반복해야 하는 경우 혹은 높은 성능을 원하는 경우에는 고가의 SLC 타입을 선택하는 것이 좋고, 저가의 대용량 저장 장치를 원한다면 TLC 타입, 그 중간을 원한다면 MLC 타입의 저장 장치를 선택하는 것이 좋습니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%85%E1%85%B5%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

---

## 플래시 메모리의 셀보다 더 큰 단위.

이제 플래시 메모리의 가장 작은 단위인 셀보다 더 큰 단위를 알아봅시다.

셀들이 모여 만들어진 단위를 **페이지(page)**, 그리고 페이지가 모여 만들어진 단위를 **블록(block)** 이라고 합니다.

블록이 모여 **플레인(plane)**, 플레인이 모여 **다이(die)** 가 됩니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%8B%E1%85%B4%E1%84%89%E1%85%A6%E1%86%AF%E1%84%87%E1%85%A9%E1%84%83%E1%85%A1%E1%84%83%E1%85%A5%E1%84%8F%E1%85%B3%E1%86%AB%E1%84%83%E1%85%A1%E1%86%AB%E1%84%8B%E1%85%B1%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

플레시 메모리에서 읽기와 쓰기는 페이지 단위로 이루어 집니다.

하지만 삭제는 페이지보다 큰 블록 단위로 이루어집니다.

읽기/쓰기 단위와 삭제 단위가 다르다는 것이 플래시 메모리의 가장 큰 특징 중 하나입니다.

### 페이지의 상태.

페이지는 세 개의 상태를 가질 수 있습니다.

이는 각각 Free, Valid, Invalid 상태입니다.

- **Free 상태 :** 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태.
- **Valid 상태 :** 이미 유효한 데이터를 저장하고 있는 상태.
- **Invalid 상태 :** 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태.

플래시 메모리는 하드 디스크와는 달리 덮어쓰기가 불가능하여 Vaild 상태인 페이지에는 새 데이터를 저장할 수 없습니다.

### 플래시 메모리의 간단한 동작 예시.

플래시 메모리의 간단한 동작을 예시로 알아봅시다.

X라는 블록이 네 개의 페이지로 이루어져 있다고 가정해 보겠습니다.

그리고 그중 두 개의 페이지에는 왼쪽 아래와 같이 A와 B라는 데이터가 저장 되어 있다고 합시다.

여기서 블록 X에 새로운 데이터 C를 저장한다면 아래 그림과 같이 저장됩니다.

플래시 메모리의 읽기 쓰기 단위는 페이지이기 때문입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A8%E1%84%89%E1%85%B5%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true">

여기서 새롭게 저장된 C와 기존에 저장되어 있던 B는 그대로 둔 채 기존의 A만을 A'로 수정하고 싶다면 플래시 메모리에서 덮어쓰기는 불가능하기 때문에 기존에 저장된 A는 Invalid 상태가 되어 더 이상 값이 유효하지 않은 쓰레기값이 되고, 새로운 A' 데이터가 저장됩니다.

결과적으로 블록 X의 Valid 페이지는 B, C, A'가 됩니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A8%E1%84%89%E1%85%B5%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B72.png?raw=true">

그런데 여기서 문제가 있습니다.

A와 같이 쓰레기 값을 저장하고 있는 공간은 사용하지 않을 공간인데도 불구하고 용량을 차지하고 있습니다.

이는 엄연히 용량 낭비입니다.

그렇다고 A만 지울 수도 없습니다.

앞서 언급했듯이 플래시 메모리에서 삭제는 블록 단위로 수행되기 때문입니다.

그래서 최근 SSD를 비롯한 플래시 메모리는 이런 쓰레기 값을 정리하기 위해 **가비지 컬렉션(Garbege Collection)** 기능을 제공합니다.

가비지 컬렉션은 1. 유효한 페이지들만을 새로운 블록으로 복사한 뒤, 2. 기존의 블록을 삭제하는 기능입니다.

즉, 블록 X의 모든 유효한 페이지를 새로운 블록 T로 옮기고 블록 X를 삭제하는 것입니다.

<img src = "https://github.com/devKobe24/images/blob/main/%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A8%E1%84%89%E1%85%B5%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B73.png?raw=true">

---

## 키워드로 정리하는 핵심 포인트

- **하드 디스크** 의 구성요소에는 플래터, 스핀들, 헤드, 디스크 암이 있습니다.
- **플래터**는 트랙과 섹터로 나뉘고, 여러 플래터의 동일한 트랙이 모여 실린더를 이룹니다.
- 하드 디스크의 **데이터 접근 시간**은 크게 탐색 시간, 회전 지연, 전송 시간으로 나뉩니다.
- **플래시 메모리**는 한 셀에 몇 비트를 저장할 수 있느냐에 따라 SLC, MLC, TLC로 나뉩니다.
- 플래시 메모리의 읽기과 쓰기는 **페이지** 단위로, 삭제는 **블록** 단위로 이루어 집니다.
