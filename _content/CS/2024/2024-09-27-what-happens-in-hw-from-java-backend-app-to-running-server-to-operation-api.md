---
title: "💾 [CS] Java 백엔드 애플리케이션에서 서버를 실행시켜 API를 동작시키기까지 하드웨어적으로 일어나는 일"
tags:
    - CS
date: "2024-09-27"
thumbnail: "/assets/img/thumbnail/cs.jpeg"
---

# 💾 [CS] Java 백엔드 애플리케이션에서 서버를 실행시켜 API를 동작시키기까지 하드웨어적으로 일어나는 일.

Java 백엔드 애플리케이션에서 서버를 실행시키고 API가 동작하기까지는 소프트웨어와 하드웨어가 긴밀하게 상호작용합니다.
하드웨어 측면에서는 CPU, 메모리(RAM), 디스크, 네트워크 카드(NIC)와 같은 컴퓨터 부품들이 중요한 역할을 하며, 이러한 부품들이 어떻게 작동하는지에 대해 설명하겠습니다.

> 🙋‍♂️ [서버를 실행시켜 API를 동작시키기까지 일어나는 일 - Spring](https://www.devkobe24.com/Backend/Spring/2024-09-27-what-happens-from-running-the-server-to-operating-the-API.html)

## 1️⃣ 애플리케이션 실행 및 서버 시작.

### 1.1 애플리케이션 바이너리 로딩.
- **디스크(HDD/SDD)**
    - 먼저, Java 애플리케이션을 실행하면 디스크(HDD나 SDD)에 저장된 애플리케이션 코드와 라이브러리(JAR 파일 등)가 **디스크에서 RAM으로 로드됩니다.**
        - **디스크 컨트롤러**가 디스크의 특정 섹터에 저장된 프로그램 파일을 찾아서 읽어옵니다.
        - **메모리 컨트롤러**를 통해 데이터를 **RAM**으로 복사합니다.

### 1.2 JVM 시작.
- Java 애플리케이션은 **Java Virtual Machine(JVM)** 에서 실행되므로, JVM 바이너리도 디스크에서 RAM으로 로드되고, JVM이 시작됩니다.
    - JVM은 애플리케이션의 **바이트코드(.class 파일)** 를 읽어들여 실행할 준비를 합니다.

### 1.3 CPU와 메모리의 역할.
- CPU는 이제 메모리에 적재된 JVM과 애플리케이션 코드를 처리하기 시작합니다.
    - JVM이 바이트코드를 **기계어로 변환(JIT 컴파일링)** 하여 CPU가 이해할 수 있는 명령으로 전환됩니다.
    - **프로세스와 스레드**가 생성되고, CPU는 스레드를 통해 애플리케이션 코드를 순차적으로 실행합니다.
    - 이때, CPU의 **레지스터와 캐시 메모리**가 자주 사용되는 데이터를 보관하고, RAM에서 직접 가져오는 데이터는 **버스**를 통해 전달됩니다.

## 2️⃣ 임베디드 웹 서버 실행 (예: Tomcat)

### 2.1 네트워크 초기화.
- 서버 애플리케이션이 시작되면, **네트워크 인터페이스 카드(NIC)** 가 네트워크 연결을 설정하고 지정된 포트(예: 8080)를 통해 외부에서 들어오는 HTTP 요청을 받을 수 있도록 준비합니다.
    - 서버는 **IP 주소와 포트 번호**를 바인딩하고, 네트워크 통신을 위해 **소켓(Socket)** 을 엽니다.
        - 이는 네트워크 인터페이스 카드와 관련된 하드웨어 레벨에서 이루어집니다.

### 2.2 멀티스레드 처리.
- 서버 애플리케이션은 멀티스레딩을 통해 동시 요청을 처리할 수 있도록 합니다.
    - CPU의 **코어와 스레드**가 생성되어 여러 사용자의 요청을 동시에 처리합니다.
        - 멀티코어 CPU는 여러 요청을 병렬로 처리하여 성능을 향상시킵니다.
    - CPU는 **컨텍스트 스위칭을 통해** 스레드간의 작업 전환을 관리하며, 각 요청에 대해 메모리와 CPU 시간을 할당합니다.

## 3️⃣ 클라이언트 요청 처리.

### 3.1 네트워크 인터페이스 카드(NIC)
- 클라이언트가 API 호출을 통해 서버에 HTTP 요청을 보내면, 이 데이터는 **TCP/IP 패킷**으로 전송됩니다.
    - **네트워크 인터페이스 카드(NIC)** 는 네트워크를 통해 들어오는 요청을 수신하고 이를 처리합니다.
    - 네트워크 카드가 수신한 데이터 패킷을 **네트워크 스택**을 통해 처리한 후, 애플리케이션 레이어에서 이해할 수 있는 HTTP 요청으로 변환됩니다.

### 3.2 데이터 패킷 처리
- 수신된 데이터 패킷은 CPU가 처리하게 됩니다.
    - 여기서 CPU는 네트워크 카드에서 받은 패킷을 **메모리(RAM)** 에 적재하여 **DispatcherServlet**으로 전달합니다.
        - CPU는 요청 처리에 필요한 데이터를 캐시 메모리나 RAM에서 불러와 작업을 시작합니다.

## 4️⃣ 비즈니스 로직 처리 및 데이터베이스 연동.

### 4.1 CPU와 RAM 간 데이터 이동
- 요청이 들어오면 CPU는 메모리(RAM)에서 **비즈니스 로직** 과 **API 엔드포인트**에 필요한 정보를 가져와 처리합니다.
    - 비즈니스 로직 실행에 필요한 데이터는 RAM에 저장되며, 데이터베이스와의 상호작용이 필요한 경우 디스크에서 데이터베이스가 동작합니다.

> 🙋‍♂️ [비즈니스 로직 vs 비즈니스 규칙](https://www.devkobe24.com/CS/2024/2024-09-26-APIdesign-LayeredArchitecture-Transaction-Entity-BusinessLogicAndRules.html)

### 4.2 데이터베이스 접근
- 데이터베이스는 일반적으로 **디스크(HDD/SDD)** 에 데이터를 저장합니다.
    - API가 데이터베이스에 접근하여 데이터를 읽거나 쓰기 위한 작업이 필요할 때, 데이터는 디스크에서 읽어와 RAM으로 로드됩니다.
        - **디스크 컨트롤러**는 데이터를 디스크에서 찾아 RAM으로 전송하고, CPU는 이 데이터를 처리한 후 적절한 결과를 반환합니다.

## 5️⃣ API 응답 및 네트워크 전송.

### 5.1 CPU와 네트워크 카드 간의 데이터 처리.
- 비즈니스 로직이 완료되면, CPU는 결과 데이터를 메모리(RAM)에 저장하고, 이 데이터를 다시 **TCP/IP 패킷**으로 변환합니다.
    - CPU는 패킷을 생성한 후, 패킷은 다시 **네트워크 인터페이스 카드(NIC)** 로 전달되어 네트워크를 통해 클라이언트에게 전송됩니다.
    - NIC는 패킷을 인터넷으로 보내는 작업을 처리하며, 클라이언트가 요청한 데이터를 다시 전달합니다.

### 5.2 클라이언트 응답 전송.
- 클라이언트는 서버에서 전송된 HTTP 응답을 받게 되고, 서버는 해당 요청 처리에 대한 상태 코드와 데이터를 전달합니다.
    - 이 과정에서 네트워크 카드와 메모리, CPU가 지속적으로 데이터를 주고받습니다.

## 6️⃣ 하드웨어 관련 핵심 역할 요약.

### 1. CPU
- 프로그램의 명령을 처리하고 계산을 수행하는 가장 중요한 장치입니다.
- 요청을 처리하는 스레드 생성, 데이터 처리, 메모리 관리 등을 담당합니다.

### 2. RAM
- 데이터를 일시적으로 저장하고, CPU가 빠르게 접근할 수 있도록 도와줍니다.
- 요청 처리 중 필요한 데이터는 RAM에 저장되며, CPU가 이 데이터를 불러와 처리합니다.

### 3. 디스크(HDD/SSD)
- 애플리케이션 코드와 데이터베이스를 저장하는 영구적인 저장소입니다.
- 필요한 데이터는 디스크에서 RAM으로 불러와 사용됩니다.

### 4. 네트워크 인터페이스 카드(NIC)
- 클라이언트의 요청을 받아들이고, 서버의 응답을 클라이언트에게 보내는 역할을 담당합니다.
- 네트워크 패킷을 주고받으며 인터넷 상에서 데이터가 흐르게 합니다.

## 7️⃣ 전체 과정 요약.

### 1. 애플리케이션 시작.
- 디스크에서 애플리케이션이 로드되고, JVM이 메모리에서 실행됩니다.

### 2. 네트워크 설정.
- 서버는 포트와 IP 주소를 바인딩하고 외부 요청을 대기합니다.

### 3. 클라이언트 요청.
- 클라이언트의 요청이 네트워크를 통해 서버로 전달되고, 네트워크 카드와 CPU가 이를 처리합니다.

### 4. 비즈니스 로직 실행.
- CPU는 요청에 맞는 비즈니스 로직을 실행하고, 데이터베이스나 캐시에서 데이터를 불러와 처리합니다.

### 5. 응답 생성.
- 처리된 데이터는 다시 클라이언트로 전송되며, 네트워크 카드와 CPU가 이 과정을 수행합니다.

하드웨어적 측면에서는 **디스크, RAM, CPU, 네트워크 인터페이스 카드**가 상호작용하며, 각 장치는 자신의 역할을 수행하여 API가 원활히 동작할 수 있도록 지원합니다.
