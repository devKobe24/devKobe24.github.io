---
title: 🍃[Spring] 연관관계를 사용하면 무엇이 좋을까요?
tags:
    - Spring
    - Framework
date: "2024-11-13"
thumbnail: "/assets/img/thumbnail/spring.jpeg"
---

# 🍃[Spring] 연관관계를 사용하면 무엇이 좋을까요?
- JPA에서 **연관관계를 사용**하면 객체 지향적인 방법으로 **데이터베이스의 테이블 간 관계를 표현**하고, **데이터의 일관성을 유지하며 효율적으로 관리할 수 있습니다.**
- JPA 연관관계는 애플리케이션에서 엔티티들 간의 관계를 객체 모델로 그대로 표현하므로, SQL 중심의 데이터베이스 접근보다 직관적이고 유지보수가 쉬운 코드 작성을 돕습니다.

## 1️⃣ JPA 연관관계를 사용했을 때의 장점.

### 1️⃣ 객체 지향적인 데이터 모델링.
- 연관관계를 통해 엔티티들이 실제 비즈니스 도메인에서와 유사하게 연결되어 표현되므로, 객체 지향적인 데이터 모델링이 가능합니다.
    - User와 Order의 관계처럼 엔티티가 서로 참조하며 관계를 표현할 수 있습니다.
- 이를 통해 비즈니스 로직을 코드로 더 자연스럽게 표현할 수 있으며, 개발자가 데이터베이스 구조에 대한 고민보다 비즈니스 로직에 더 집중할 수 있습니다.

### 2️⃣ 자동으로 SQL을 생성하여 관리 부담 감소.
- JPA는 연관관계를 설정하면 **필요한 SQL을 자동으로 생성하고 실행해주므로, 연관관계를 직접 SQL로 관리하는 부담을 덜어줍니다.**
    - 예를 들어, User와 Order 간의 관계가 설정되어 있으면, User 객체에서 Order 객체를 조회할 때 JPA가 자동으로 SQL을 생성해 데이터베이스에서 필요한 데이터를 가져옵니다.

### 3️⃣ 일관성과 무결성 유지.
- 연관관계와 **Cascade** 옵션, **orphanRemoval** 옵션을 통해 객체 간 관계를 JPA가 관리해 주므로, 부모와 자식 엔티티 간 일관성을 쉽게 유지할 수 있습니다.
- 부모 엔티티가 삭제되면 자식 엔티티도 자동으로 삭제되거나 연관된 자식 엔티티가 Orphan Object(고아 객체)로 남지 않도록 관리할 수 있어 데이터 무결성을 유지하는 데 유리합니다.

### 4️⃣ 성능 최적화 지원.
- JPA는 연관관계 설정을 통해 **지연 로딩(Lazy Loading), 즉시 로딩(Eager Loading), 페치 조인(Fetch Join)** 등을 사용하여 필요할 때만 데이터를 조회할 수 있습니다.
    - 예를 들어, fetch = FetchType.LAZY로 설정하면 데이터베이스에서 관련된 데이터를 즉시 로드하지 않고 실제로 필요할 때 조회하게 되어 성능 최적화가 가능합니다.

### 5️⃣ 비즈니스 로직의 응집도 향상.
- 연관관계를 사용하면 도메인 객체 간의 관계를 객체지향적인 방식으로 캡슐화하여 비즈니스 로직을 작성할 수 있어 응집도가 높아집니다.
    - 예를 들어, Order 객체에 addOrderItem() 메서드를 정의해 OrderItem을 추가할 수 있습니다.
        - Order 객체에 연관된 모든 OrderItem이 자동으로 관리되므로, 비즈니스 로직이 보다 일관성 있게 유지됩니다.

### 6️⃣ 복잡한 쿼리 작성 최소화.
- 연관관계를 통해 객체 간의 참조를 쉽게 사용할 수 있으므로, 직접 조인을 작성하는 복잡한 쿼리를 줄일 수 있습니다.
- 특히 양방향 연관관계를 통해 엔티티 간 관계를 쉽게 탐색할 수 있어 비즈니스 로직을 구현할 때 코드가 단순해집니다.

## 2️⃣ 연관관계를 사용한 예제의 장점.
- 예를 들어, Team과 Member가 양방향 연관관계를 가지는 경우, Team 객체에서 Member 객체를 쉽게 조회할 수 있습니다.
```java
Team team = entityManager.find(Team.class, teamId);
List<Member> members = team.getMembers();
```
- 위와 같이 Team에서 Member를 쉽게 조회할 수 있으며, 복잡한 SQL을 작성할 필요 없이 JPA가 연관관계를 관리하여 필요한 데이터를 제공합니다.

## 3️⃣ 요약.
- JPA에서 연관관계를 사용하면 **객체 지향적으로 데이터 모델을 표현하고, SQL을 자동으로 생성하며, 데이터 무결성과 일관성을 쉽게 유지할 수 있습니다. 또한, 지연 로딩과 같은 기능으로 성능을 최적화하고, 복잡한 비즈니스 로직을 더 직관적이고 응집력 있게 관리할 수 있게 합니다.**
